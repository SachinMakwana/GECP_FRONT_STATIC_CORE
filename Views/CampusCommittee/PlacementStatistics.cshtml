@model GECP_Front_End_Static.Models.PlacementPageData
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Placement Cell";
    int count = 0;
}

<div class="clearfix"></div>


<div class="page_title3 placement_title">
    <div class="container">

        <h1>
            <br> Placement Cell<em>Government Engineering College</em>
            <div class="line"></div>
            <br>
        </h1>

    </div>
</div>
<div class="clearfix margin_bottom6"></div>

<div class="featured_section13"> 
    <h1 class="caps text-center">CURRENT PLACEMENT</h1>
    <div class="container">
        <h2 class="color2">
            <marquee style="line-height:100px">
                @foreach (var item in Model.placementMarqueeModel)
                {
                    if (item.IsFile)
                    {
                        // Use a variable to hold the URL and check if it’s valid
                        var instalink = item.Instalink;
                        var logo = item.Logo;
                        var title = item.Title;
                        var studentsHired = item.StudentsHired;

                        <a href="@Url.Content(instalink)" target="_blank" class="placement-link">
                            @if (!string.IsNullOrEmpty(logo))
                            {
                                <img src="@logo" alt="@title Logo" class="placement-logo" style="width: 100px; height: auto;" />
                            }
                            <span class="placement-title">@title</span>
                            <span class="placement-stats">
                                Recruited: @studentsHired Students
                            </span>
                        </a>
                    }
                    else
                    {
                        <a href="@Url.Action(item.ActionName, item.ControllerName)">
                            @item.Title
                        </a>
                    }
                }
            </marquee>
        </h2>
    </div>
</div>


<div class="container mt-5">
    <h1 class="caps text-center mb-4">
        STUDENTS PLACED
    </h1>
    <div class="clearfix"></div>

    <div class="owl-carousel owl-theme" id="owl-demo">
        @foreach (var student in Model.StudentsPlaced)
        {
            <div class="item">
                <div class="card border-0 shadow-lg rounded text-center d-flex flex-column justify-content-center align-items-center" style="overflow: hidden; padding: 5px;">
                    <!-- Circular Image Container -->
                    <div class="image-container mx-auto mb-3" style="width: 220px; height: 250px; border-radius: 50%; overflow: hidden; border: 3px solid #007bff;">
                        <img src="@student.Pic" alt="@student.name" class="img-fluid" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>

                    <!-- Card Body Content -->
                    <div class="card-body p-0">
                        <h4 class="card-title font-weight-bold mb-1 text-center" style="color: #007bff;">@student.name</h4>
                        <p class="card-text text-muted mb-1 text-center">
                            <span style="font-weight: 500;">Department:</span> @student.department
                        </p>
                        <p class="card-text text-muted mb-1 text-center">
                            <span style="font-weight: 500;">Package:</span> @student.package
                        </p>
                        <p class="card-text text-muted mb-1 text-center">
                            <span style="font-weight: 500;">Company:</span> @student.company
                        </p>
                        <p class="card-text text-muted text-center">
                            <span style="font-weight: 500;">&#9989; RECRUITED!</span>
                        </p>
                    </div>
                </div>
            </div>
        }
    </div>
</div>


<div class="container">
    <h1 class="caps text-center">
        TOP RECRUITERS
    </h1>
    <div class="clearfix"></div>
    <div class="owl-carousel owl-theme" id="owl-demo2">
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Wishtree Technologies1.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Tata Consultancy Services.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Shaligram Infotech.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Evosys Global.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Volansys.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Pratibha Engineering Service, Baroda.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Ordex Technologies.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Tatvic Analytics.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/WebOccult Technologies.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/KNOVOS.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Sarjen System Pvt Ltd..jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Itaims.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Radixweb.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Synoverge Technologies.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Webmyne Systems Pvt Ltd.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Monarch Innovation Pvt. Ltd..jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Valens DataLabs.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/TriState Technology.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Yiion System Pvt Ltd..jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Maruti Techlabs.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Simform Solutions.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Wappnotech.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/MicroLogix Solutions.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Jekson Vision.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Vivansh Infotech.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/AIAB.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/HypeTeq Software Solutions.jpg")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/Matrix Comsec.png")" alt=""></div>
        <div class="item"><img src="@Url.Content("~/images/CampusCommittee/Placement/companies/WeblineIndia.png")" alt=""></div>
    </div>
</div>

<div class="clearfix" style="background: #5076bb !important"></div>

<div class="clearfix margin_bottom6"></div>
<div class="container">
    <h1 class="caps text-center">
        Placement Data
    </h1>
    <div class="clearfix"></div>
    <div class="rows">

        <!-- block 1 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>CIVIL DEPARTMENT PLACEMENT  </h5>
                <a id="chart4" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/CIVIL1.png")" width="289" height="241">
                    <br>
                    <span onclick="showChart(4,'CIVIL DEPARTMENT')">Click to View Graph</span>
                </a>
            </div>

        </div>

        <!-- block 2 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>MECHANICAL DEPARTMENT PLACEMENT  </h5>
                <a id="chart5" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/MECH1.png")" width="289" height="241">
                    <br>
                    <span onclick="showChart(5,'MECHANICAL DEPARTMENT')">Click to View Graph</span>
                </a>
            </div>
        </div>

        <!-- block 3 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>Electrical DEPARTMENT PLACEMENT  </h5>
                <a id="chart3" href="#animatedModal" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/EE1.png")" width="289" height="241">
                    <br>
                    <span onclick="showChart(3,'ELECTRICAL DEPARTMENT')">Click to View Graph</span>
                </a>
            </div>
        </div>

        <!-- block 4 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>Computer Science DEPARTMENT PLACEMENT  </h5>
                <a id="chart2" href="#animatedModal" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/CSE2.png")" width="289" height="241">
                    <br>
                    <span onclick="showChart(2,'COMPUTER DEPARTMENT')">Click to View Graph</span>
                </a>
            </div>
        </div>

        <!-- block 5 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>Electronics and Communication DEPARTMENT PLACEMENT  </h5>
                <a id="chart1" href="#animatedModal" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/EC1.png")" width="289" height="241">
                    <br>
                    <span onclick="showChart(1,'Electronics and Communication DEPARTMENT')">Click to View Graph</span>
                </a>
            </div>
        </div>

        <!-- block 6 -->

        <div class="g1 col-lg-4 col-sm-4">
            <div class="graph-pnl text-center">
                <h5>BRANCH-WISE PLACEMENT</h5>
                <a id="myBtn" href="javascript:void(0)" class="popup-trigger">
                    <img src="@Url.Content("~/images/CampusCommittee/Placement/BR1.png")" width="289" height="241">
                    <br>
                    <span onclick="showPieChart()">Click to View Graph</span>
                </a>
            </div>
        </div>

    </div>



    <!-- FOR BLOCK 2 -->


    <a id="lnkPopup" href="#animatedModal" class="popup-trigger hidden" data-target="#popup1"></a>
    <div id="popup1" class="popup">
        <!-- <div class="popup-text"> -->
        <div id="chartdiv1">
            <div id="chartContainer1" style="width: 100%; height: 300px;display: inline-block;"></div>
        </div>
        <div class="details">
            <div id="chartContainer8" style="width: 100%; height: 300px;display: inline-block;"></div>

        </div>
        <!-- </div> -->
        <span class="popup-btn-close">&times;</span>
    </div>



    <div id="popup5" class="popup">
        <!-- <div class="popup-text"> -->
        <div id="chartdiv5">
            <div id="chartContainer6" style="width: 100%; height: 300px;display: inline-block;"></div>
        </div>
        <div class="details">

            <div id="chartContainer12" style="width: 100%; height: 300px;display: inline-block;"></div>
        </div>
        <!-- </div> -->
        <span class="popup-btn-close">&times;</span>
    </div>
</div>
<div class="clearfix "></div>
<div class="container">


    <div style="overflow-x:auto;" class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <td rowspan="2" style="vertical-align: middle; text-align:center;">Branch</td>
                    <td rowspan="2" style="vertical-align: middle; text-align: center;">Year</td>
                    <td rowspan="2" style="vertical-align: middle; text-align: center;">Passout Students</td>
                    <td colspan="5" style="vertical-align: middle; text-align: center;">Placement</td>
                </tr>
                <tr>
                    <td style="text-align:center;">Placed</td>
                    <td style="text-align:center;">Average CTC</td>
                    <td style="text-align:center;">Higher Study</td>
                    <td style="text-align:center;">Business</td>
                    <td style="text-align:center;">Placement(%)</td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.PlacementDataVMs)
                {
                    count = 0;
                    @foreach (var data in item.Data)
                    {
                        <tr>
                            @if (count == 0)
                            {
                                <td rowspan="@item.Data.Count()" style="vertical-align: middle;">@item.BranchName</td>
                            }
                            <td style="text-align:right;">@data.Year</td>
                            <td style="text-align:right;">@data.Passout</td>
                            <td style="text-align:right;">@data.Placed</td>
                            <td style="text-align:right;">@data.AverageCTC</td>
                            <td style="text-align:right;">@data.HigherStudy</td>
                            <td style="text-align:right;">@data.Business</td>
                            <td style="text-align:right;">@data.PlacementPercentage</td>

                        </tr>
                        count++;
                    }

                }
            </tbody>
        </table>
    </div>
</div>

<div class="clearfix  margin_bottom6"></div>

<div class="featured_section13">
    <div class="container">
        <h2 class="color2">
            <marquee style="line-height:100px">
                @foreach (var item in Model.placementMarqueeModel)
                {
                    if (item.IsFile)
                    {
                        // Use a variable to hold the URL and check if it’s valid
                        var instalink = item.Instalink;
                        var logo = item.Logo;
                        var title = item.Title;
                        var studentsHired = item.StudentsHired;

                        <a href="@Url.Content(instalink)" target="_blank" class="placement-link">
                            @if (!string.IsNullOrEmpty(logo))
                            {
                                <img src="@logo" alt="@title Logo" class="placement-logo" style="width: 100px; height: auto;" />
                            }
                            <span class="placement-title">@title</span>
                            <span class="placement-stats">
                                Recruited: @studentsHired Students
                            </span>
                        </a>
                    }
                    else
                    {
                        <a href="@Url.Action(item.ActionName, item.ControllerName)">
                            @item.Title
                        </a>
                    }
                }
            </marquee>
        </h2>
    </div>
</div>



@section scripts{

    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript">
        var CanvasJS = CanvasJS;
        var chart = new CanvasJS.Chart();

        var colorShade1 = {
            "name": "greenShades",
            "color": ["#7B5DDA", "#975DDA", "#BF5DDA", "#DA5DCC"]
        };

        var colorShade2 = {
            "name": "greenShades",
            "color": ["#06644D", "#1CB18D", "#44E1BB", "#78FADA"]
        };
        function showChart(id, dept) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetChartData","CampusCommittee")',
                data: { 'id': id },
                dataType: "json",
                success: function (data) {
                    renderChart(colorShade1, "chartContainer1", dept, data[0], chart, CanvasJS);
                    renderChart(colorShade2, "chartContainer8", dept, data[1], chart, CanvasJS);
                    $("#lnkPopup").click();
                }
            })
        }
        function renderChart(colorShades, container, department, data, chart, CanvasJS) {
            CanvasJS.addColorSet(colorShades.name, colorShades.color);
            chart = new CanvasJS.Chart(container, {
                animationEnabled: true,
                theme: "light2", // "light1", "light2", "dark1", "dark2"
                title: {
                    text: department + " FOR YEAR " + data.year,
                    fontSize: 20,
                },
                axisY: {
                    title: "No of Students",
                },
                data: [{
                    type: "column",
                    yValueFormatString: "#",
                    dataPoints: [
                        { label: "Students Passout", y: data.passout },
                        { label: "Students Placed", y: data.placed },
                        { label: "Further Study", y: data.higherStudy },
                        { label: "Business", y: data.business }

                    ]
                }]
            });
            chart.render();
        }


        function showPieChart() {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPieChartData","CampusCommittee")',
                dataType: "json",
                success: function (data) {
                    renderPieChart(colorShade1, "chartContainer1", data[0].year, data[0].data, chart, CanvasJS);
                    renderPieChart(colorShade2, "chartContainer8", data[1].year, data[1].data, chart, CanvasJS);
                    $("#lnkPopup").click();
                }
            })
        }

        function renderPieChart(colorShades, container, year, data, chart, CanvasJS) {
            var pieArray=[];
            for(var i=0;i<data.length;i++){
                pieArray.push({
                    label: data[i].branchName,
                        y: data[i].percentage
                });

            }
            chart = new CanvasJS.Chart(container, {
                animationEnabled: true,
                colorSet: "greenShades",
                theme: "light2", // "light1", "light2", "dark1", "dark2"
                title: {
                    text: "BRANCHWISE PLACEMENT "+year,
                    fontSize: 20,
                },
                data: [{
                    type: "pie",
                    startAngle: 240,
                    yValueFormatString: "##0.00'%'",
                    indexLabel: "{label} {y}",
                    dataPoints: pieArray
                }]
            });
            chart.render();
        }

        $(document).ready(function () {
            $("#owl-demo").owlCarousel({
                    items: 4, // Number of visible items set to 4
                    loop: true, // Loop the carousel
                    margin: 15, // Space between items
                    nav: true, // Show navigation arrows
                    dots: true, // Show dots for navigation
                    autoplay: true, // Enable auto-play
                    autoplayTimeout: 3000, // Time between slides
                    navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
                    responsive: {
                        0: { items: 1 }, // 1 item for small screens
                        768: { items: 2 }, // 2 items for medium screens
                        1000: { items: 3 }, // 3 items for larger screens
                        1200: { items: 4 }  // 4 items for large desktops
                    }
            });
        });
        $(document).ready(function () {
            $("#owl-demo2").owlCarousel({
                items: 4, // Number of visible items set to 4
                loop: true, // Loop the carousel
                margin: 15, // Space between items
                nav: true, // Show navigation arrows
                dots: true, // Show dots for navigation
                autoplay: true, // Enable auto-play
                autoplayTimeout: 3000, // Time between slides
                navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
                responsive: {
                    0: { items: 1 }, // 1 item for small screens
                    768: { items: 2 }, // 2 items for medium screens
                    1000: { items: 3 }, // 3 items for larger screens
                    1200: { items: 4 }  // 4 items for large desktops
                }
            });
        });
    </script>




    <script>
        function popupOpenClose(popup) {

            /* Add div inside popup for layout if one doesn't exist */
            if ($(".wrapper", popup).length == 0) {
                $(popup).wrapInner("<div class='wrapper'></div>");
            }

            /* Open popup */
            $(popup).show();

            /* Close popup if user clicks on background */
            $(popup).click(function (e) {
                if (e.target == this) {
                    if ($(popup).is(':visible')) {
                        $(popup).hide();
                    }
                }
            });

            /* Close popup and remove errors if user clicks on cancel or close buttons */
            $(popup).find(".popup-btn-close").on("click", function () {
                if ($(".formElementError").is(':visible')) {
                    $(".formElementError").remove();
                }
                $(popup).hide();
            });
        }

        $(document).ready(function () {
            $(".popup-trigger").on("click", function () {
                var target = $(this).data('target');
                popupOpenClose($(target));
            });
        });
    </script>

    <script src="@Url.Content("~/js/carouselowl/owl.carousel.js")"></script>
    <!-- jQuery (Owl Carousel requires jQuery) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Owl Carousel JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

}

@section styles{
    <link rel="stylesheet" href="@Url.Content("~/images/CampusCommittee/Placement/graph.css")" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />

    <link href="@Url.Content("~/js/carouselowl/owl.transitions.css")" rel="stylesheet">
    <link href="@Url.Content("~/js/carouselowl/owl.carousel.css")" rel="stylesheet">
    <style>
        .owl-carousel .item {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .card {
            transition: transform 0.3s ease-in-out;
        }

        .card:hover {
                transform: scale(1.05);
        }

        /* Circular Image Style */
        .image-container {
            width: 180px;
            height: 200px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #007bff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .image-container img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                align-content: center;
        }
        /* Reduce the gap between name, department, package, and company */

        .card-body p {
            margin-bottom: 1px; /* Decreased margin between elements */
        }

        .card-title {
            margin-bottom: 1px; /* Decreased margin below the name */
        }

        /* Custom navigation button styles */
        .owl-nav .owl-prev, .owl-nav .owl-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #007bff;
            border-radius: 50%;
            color: white;
            width: 35px;
            height: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .owl-nav .owl-prev {
            left: -40px;
        }

        .owl-nav .owl-next {
            right: -40px;
        }

        /* Dot styles */
        .owl-dots {
            margin-top: 1px;
            text-align: center;
        }

        .owl-dots .owl-dot {
                display: inline-block;
                width: 12px;
                height: 12px;
                margin: 5px;
                border-radius: 50%;
                background: #ddd;
                cursor: pointer;
        }

        .owl-dots .owl-dot.active {
                    background: #007bff;
        }
    </style>
}