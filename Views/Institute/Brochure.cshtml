@{
    Layout = "~/Views/Shared/_Layout.cshtml";
 }

<div class="container" style="padding: 50px; text-align: center;">
    <h2>Popup Component Ready</h2>
    <p>Click the button below to test the popup functionality.</p>

    <button class="btn btn-primary" onclick="openPdfPopup('/path/to/your/sample.pdf')">
        <i class="fa fa-file-pdf"></i> Open Test PDF
    </button>
</div>

<div id="popupOverlay" class="popup-overlay"></div>

<div id="popup">
    <div class="popup-close">&times;</div>
    <div id="pdfreader"></div>
</div>

<div class="clearfix"></div>

<style>
    /* Popup Overlay (Dimmed Background) */
    .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 9998;
    }

    /* The Popup Box */
    #popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 85%;
        height: 90%;
        background: #fff;
        z-index: 9999;
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* PDF Reader Container */
    #pdfreader {
        width: 100%;
        height: 100%;
        background-color: #f4f4f4; /* Placeholder color while loading */
    }

    /* Close Button (Red X) */
    .popup-close {
        position: absolute;
        top: -15px;
        right: -15px;
        background: #ff4444;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        text-align: center;
        line-height: 30px;
        cursor: pointer;
        font-weight: bold;
        font-family: Arial, sans-serif;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        transition: background 0.2s;
        z-index: 10000;
    }

        .popup-close:hover {
            background: #cc0000;
        }
</style>

@section scripts {
    <script src="@Url.Content("~/js/pdfobject/pdfobject.min.js")"></script>

    <script>
        // Define the function globally so it can be called from anywhere
        window.openPdfPopup = function (path) {
            // Validate path
            if (!path || path === '') {
                alert("Document path not found.");
                return;
            }

            // Show UI
            jQuery('#popupOverlay').fadeIn();
            jQuery('#popup').fadeIn();

            // Embed PDF
            if (typeof PDFObject !== 'undefined') {
                // PDFObject handles browser compatibility
                PDFObject.embed(path, "#pdfreader");
            } else {
                // Fallback: simple iframe if PDFObject library is missing
                console.warn("PDFObject library not loaded. Using fallback iframe.");
                jQuery("#pdfreader").html('<iframe src="' + path + '" style="width:100%; height:100%; border:none;"></iframe>');
            }
        };

        jQuery(document).ready(function ($) {
            // Logic to Close Popup (Clicking X or the background overlay)
            $('.popup-close, #popupOverlay').on('click', function () {
                $('#popup').fadeOut();
                $('#popupOverlay').fadeOut();
                $('#pdfreader').empty(); // Clear content to stop memory leaks or audio playing
            });
        });
    </script>
}